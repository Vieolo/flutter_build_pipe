# Migrating from < 0.3.0 to >= 0.3.0

Version 0.3.0 introduces two breaking changes to the structure of the `build_pipe` config:
- The config now requires a `workflows` map.
- The `build_command` and other build-specific configurations for platforms are now nested under a `build` object.

**The migration should take less than a minute.**

## 1. Named workflows

The `build_pipe` config now requires a `workflows` map. All your existing configuration (cleaning, logging, platforms, etc.) should be moved under a workflow name. The `default` workflow might be the simplest choice for now.

**Before:**
```yaml
build_pipe:
  clean_flutter: true
  platforms:
    # ...
```

**After:**
```yaml
build_pipe:
  workflows:
    default:
      clean_flutter: true
      platforms:
        # ...
    other_workflow:
      clean_flutter: false
      platforms:
        # ...
```

## 2. Platform Build Configuration

The `build_command` and other build-specific configurations for platforms are now nested under an explicit `build` object.

This will allow us to add more build-specific options without polluting the config structure.

**Before:**
```yaml
platforms:
  ios:
    build_command: flutter build ipa
    publish:
      # ...
  android:
    build_command: flutter build appbundle
    publish:
      # ...
  web:
    build_command: flutter build web
    add_version_query_param: true
    query_param_versioning_type: hash
```

**After:**
```yaml
platforms:
  ios:
    build:
      build_command: flutter build ipa
    publish:
      # ...
  android:
    build:
      build_command: flutter build appbundle
    publish:
      # ...
  web:
    build:
      build_command: flutter build web
      add_version_query_param: true
      query_param_versioning_type: hash
```
